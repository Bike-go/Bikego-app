{% extends '__main.jinja' %}

{% block content %}
<div class="service_page">
    <h2 class="title">Přehled kol na servis</h2>

    <!-- Tabulka s koly, které potřebují servis -->
    <table id="serviceBikesTable" class="table-responsive">
        <thead>
            <tr>
                <th>ID kola</th>
                <th>Popis poškození</th>
                <th>Status</th>
                <th>Akce</th>
            </tr>
        </thead>
        <tbody>
            <!-- Statická data pro 3 kola -->
            <tr>
                <td>001</td>
                <td>Poškozený rám</td>
                <td>
                    <select class="bike-status" data-bike-id="001">
                        <option value="waiting" selected>Čekání</option>
                        <option value="in_repair">Opravuji se</option>
                        <option value="repaired">Opraveno</option>
                    </select>
                </td>
                <td>
                    <button class="btn update-status" data-bike-id="001">Uložit</button>
                </td>
            </tr>
            <tr>
                <td>002</td>
                <td>Poškozené kolo</td>
                <td>
                    <select class="bike-status" data-bike-id="002">
                        <option value="waiting">Čekání</option>
                        <option value="in_repair" selected>Opravuji se</option>
                        <option value="repaired">Opraveno</option>
                    </select>
                </td>
                <td>
                    <button class="btn update-status" data-bike-id="002">Uložit</button>
                </td>
            </tr>
            <tr>
                <td>003</td>
                <td>Poškozená brzda</td>
                <td>
                    <select class="bike-status" data-bike-id="003">
                        <option value="waiting">Čekání</option>
                        <option value="in_repair">Opravuji se</option>
                        <option value="repaired" selected>Opraveno</option>
                    </select>
                </td>
                <td>
                    <button class="btn update-status" data-bike-id="003">Uložit</button>
                </td>
            </tr>
            <!-- Konec statických dat -->
        </tbody>
    </table>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Date</th>
                <th>Comments</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for inspection in inspections %}
            <tr>
                <td>{{ inspection.id }}</td>
                <td>{{ inspection.inspection_date }}</td>
                <td>{{ inspection.comments }}</td>
                <td>{{ inspection.status }}</td>
                <td>
                    <form method="POST" action="{{ url_for('servis') }}">
                        <input type="hidden" name="inspection_id" value="{{ inspection.id }}">
                        <select name="status">
                            <option value="Pending" {% if inspection.status=='Pending' %}selected{% endif %}>Pending
                            </option>
                            <option value="In Progress" {% if inspection.status=='In Progress' %}selected{% endif %}>In
                                Progress</option>
                            <option value="Completed" {% if inspection.status=='Completed' %}selected{% endif %}>
                                Completed</option>
                        </select>
                        <button type="submit" class="btn btn-primary">Update</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}